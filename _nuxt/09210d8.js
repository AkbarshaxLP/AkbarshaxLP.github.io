(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{476:function(t,e,n){var content=n(534);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(20).default)("d41cb292",content,!0,{sourceMap:!1})},533:function(t,e,n){"use strict";n(476)},534:function(t,e,n){var l=n(19)((function(i){return i[1]}));l.push([t.i,".create-group .item{margin-bottom:15px}.create-group .item p{margin-bottom:8px}.el-table .error-row,.el-table .error-row td{background-color:#f56c6c!important;color:#fff}",""]),l.locals={},t.exports=l},614:function(t,e,n){"use strict";n.r(e);n(32),n(64),n(31),n(65);var l=n(23),o=(n(52),n(40),n(66),n(39),n(9),n(46),n(81));function r(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var c={data:function(){return{roleTitle:{director:"Direktor",teacher:"O’qituvchi"},teacher_test_id:null,count:null,monitoring_interval:null,boolTitle:{true:"Ha",false:"Yo’q",null:"Yo’q"},selected_test:null,test_lang:1,test_type:"test-1",form_id:null,dialog_add:null,dialog_test:!1,dialog_results:!1,dialog_monitoring:!1,test_results:[],test_monitoring_data:[],form:{},test_form:{difficult:1},teacher_test_data:[],loading:!1,loading3:!1,loading4:!1,rows:[],groups:[],students:[],filter:{page:1},pickerOptions:{shortcuts:[{text:"Bugun",onClick:function(t){t.$emit("pick",new Date)}},{text:"Ertaga",onClick:function(t){var e=new Date;e.setTime(e.getTime()-864e5),t.$emit("pick",e)}}]}}},watch:{dialog_monitoring:function(t){var e=this;t?this.monitoring_interval=setInterval((function(){e.getTestMonitoring(e.teacher_test_id)}),1e4):(clearInterval(this.monitoring_interval),this.test_monitoring_data=[])}},destroyed:function(){clearInterval(this.monitoring_interval)},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?r(Object(source),!0).forEach((function(e){Object(l.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):r(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({active_user:function(){return"independent"!==this.$store.state.auth.user.role.name||this.$store.state.auth.user.active},role:function(){return this.$store.state.auth.user.role.name}},Object(o.b)("dictionary",["dic_language"])),created:function(){this.fetchItems(),["teacher","director"].includes(this.role)&&this.getGroups()},methods:{rowClicked:function(t){console.log(t),t.is_worked||t.is_expired||["director"].includes(this.role)||(this.selected_test=t.id,this.dialog_test=!0)},pageChanged:function(t){this.filter.page=t,this.fetchItems()},blockUser:function(t,e,n){var l=this;this.loading4=!0;var data={student:e,blocked:n};this.$axios.post("/blocked_student/".concat(t,"/"),data).then((function(e){l.$notify({title:"O’quvchi bloklandi!",type:"info"}),l.getTestMonitoring(t)})).catch((function(t){var e=t.response.data,n=e[Object.keys(e)[0]];l.$notify.error({message:n||"Xatolik yuz berdi"})})).finally((function(){l.loading4=!1}))},tableRowClassName:function(t){var e=t.row;t.rowIndex;return e.is_expired&&!e.is_worked?"error-row":""},fetchItems:function(){var t=this;this.loading=!0,this.$axios({methods:"GET",url:"/teacher_test/",params:this.filter}).then((function(e){t.teacher_test_data=e.data.results,t.count=e.data.count})).finally((function(){t.loading=!1}))},getTestMonitoring:function(t){var e=this;this.dialog_monitoring=!0,this.teacher_test_id=t,this.$axios.get("/student/".concat(t,"/test_list/")).then((function(t){e.test_monitoring_data=t.data}))},getTestResults:function(t){var e=this;this.dialog_results=!0,this.test_results=[],this.loading3=!0,this.$axios.get("/question_box/test_list/?teacher_test=".concat(t)).then((function(t){e.test_results=t.data})).finally((function(){e.loading3=!1}))},createTeachersTest:function(){var t=this;this.$refs.teachers_test.validate().then((function(e){e&&t.$axios.post("/teacher_test/",t.test_form).then((function(e){t.$notify({title:"Qoniqarli!",message:"Test yaratildi",type:"success"}),t.test_form={difficult:1},t.dialog_add=!1,t.fetchItems()})).catch((function(e){var n=e.response.data,l=n[Object.keys(n)[0]];t.$notify.error({message:l||"Xatolik yuz berdi"})})).finally((function(){t.loading=!1}))}))},getGroups:function(){var t=this;this.loading=!0,this.$axios.get("/group/?limit=400").then((function(e){t.groups=e.data.results})).finally((function(){t.loading=!1}))},getStudent:function(){var t=this;if("teacher"==this.role){this.loading=!0;var e=this.test_form.group;this.$axios.get("/users/student/?group=".concat(e,"&limit=400")).then((function(e){t.students=e.data.results})).finally((function(){t.loading=!1}))}}}},d=c,_=(n(533),n(14)),component=Object(_.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"main-div"},[n("header",{staticClass:"flex justify-between items-center"},[n("h1",{staticClass:"Title"},[t._v("Yakuniy Testlar")]),t._v(" "),n("div",[["teacher","director"].includes(t.role)?n("button",{staticClass:"add-btn px-2",on:{click:function(e){t.form_id=null,t.dialog_add=!0}}},[t._v("\n        + Yakuniy test yaratish\n      ")]):t._e()])]),t._v(" "),n("div",{staticClass:"parrent-card"},[t._m(0),t._v(" "),[n("el-table",{staticClass:"w-full",attrs:{"row-class-name":t.tableRowClassName,data:t.teacher_test_data},on:{"row-click":t.rowClicked}},[["teacher","director","admin","super_admin"].includes(t.role)?n("el-table-column",{attrs:{prop:"group",label:"Guruh"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.is_worked?[t._v("\n              "+t._s(e.row.group?e.row.group.name_uz:"")+"\n            ")]:[e.row.is_expired||["director"].includes(t.role)?n("a",[t._v("\n                "+t._s(e.row.group?e.row.group.name_uz:"")+"\n              ")]):n("a",{staticClass:"underline text-green-300",on:{click:function(n){t.selected_test=e.row.id,t.dialog_test=!0}}},[t._v("\n                "+t._s(e.row.group?e.row.group.name_uz:"")+"\n              ")])]]}}],null,!1,3950135480)}):t._e(),t._v(" "),["student"].includes(t.role)?n("el-table-column",{attrs:{prop:"is_worked",label:"Test ishlangan"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tag",{attrs:{type:e.row.is_worked?"success":"danger",effect:"plain"}},[t._v("\n              "+t._s(e.row.is_worked?"Ha":"Yo’q")+"\n            ")])]}}],null,!1,2595466908)}):t._e(),t._v(" "),n("el-table-column",{attrs:{prop:"start_time",label:"Test boshlanish vaqti"}}),t._v(" "),n("el-table-column",{attrs:{prop:"end_time",label:"Test Davomiyligi"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" 1 - kun ")]}}])}),t._v(" "),["student"].includes(t.role)?t._e():n("el-table-column",{attrs:{prop:"student_count",label:"O’quvchilar soni"}}),t._v(" "),["student"].includes(t.role)?t._e():n("el-table-column",{attrs:{prop:"created_role",label:"Yaratgan rol"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(t.roleTitle[e.row.created_role])+"\n          ")]}}],null,!1,2675104612)}),t._v(" "),n("el-table-column",{attrs:{prop:"teacher",label:"O’qituvchi"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(t._f("fio")(e.row.teacher))+"\n          ")]}}])}),t._v(" "),n("el-table-column",{attrs:{width:"80px"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.is_worked?[n("el-popover",{attrs:{placement:"top",width:"160"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[n("div",{staticClass:"flex justify-center",staticStyle:{"text-align":"right",margin:"0"}},t._l(t.dic_language,(function(l,o){return n("el-tag",{key:l.id,class:{"ml-1":0!==o},on:{click:function(n){return t.$router.push("/test/FinalTest/"+e.row.id+"/check/?lang="+l.id)}}},[t._v("\n                    "+t._s(l.name)+"\n                  ")])})),1),t._v(" "),n("button",{attrs:{slot:"reference"},slot:"reference"},[n("i",{staticClass:"el-icon-view text-lg"})])])]:t._e(),t._v(" "),n("el-tooltip",{attrs:{content:"Test natijalari",placement:"top",effect:"light"}},[e.row.is_worked||["teacher","director"].includes(t.role)?n("i",{staticClass:"el-icon-s-order ml-2 text-lg",on:{click:function(n){t.selected_test=e.row.id,t.getTestResults(e.row.id)}}}):t._e()]),t._v(" "),n("el-tooltip",{attrs:{content:"Monitoring",placement:"top",effect:"light"}},[["teacher"].includes(t.role)?n("i",{staticClass:"el-icon-monitor ml-2 text-lg",on:{click:function(n){return t.getTestMonitoring(e.row.id)}}}):t._e()])]}}])})],1),t._v(" "),n("el-pagination",{staticClass:"mt-5",attrs:{background:"",layout:"prev, pager, next",total:t.count},on:{"current-change":t.pageChanged}})]],2),t._v(" "),n("el-dialog",{attrs:{"close-on-click-modal":!1,visible:t.dialog_test,title:"Yakuniy test ishlash tilini tanlang",width:"95%"},on:{"update:visible":function(e){t.dialog_test=e}}},[n("div",{staticClass:"item mr-2 flex flex-col"},t._l(t.dic_language,(function(e){return n("el-button",{directives:[{name:"ripple",rawName:"v-ripple"}],key:e.id,staticStyle:{margin:"0 0 10px"},attrs:{type:"primary",round:""},on:{click:function(n){return t.$router.push("/test/FinalTest/"+t.selected_test+"/?test_lang="+e.id)}}},[t._v(t._s(e.slug))])})),1)]),t._v(" "),n("el-dialog",{attrs:{"close-on-click-modal":!1,visible:t.dialog_results,title:"Yakuniy test natijalari",width:"95%"},on:{"update:visible":function(e){t.dialog_results=e}}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading3,expression:"loading3"}],staticClass:"w-full",attrs:{data:t.test_results}},[["teacher"].includes(t.role)?n("el-table-column",{attrs:{type:"index",width:"50"}}):t._e(),t._v(" "),n("el-table-column",{attrs:{prop:"student",label:"O’quvchi"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t._f("fio")(e.row.student))+"\n        ")]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"start_time",label:"Boshlagan vaqti"}}),t._v(" "),n("el-table-column",{attrs:{prop:"end_time",label:"Tugatgan vaqti"}}),t._v(" "),n("el-table-column",{attrs:{prop:"ball",label:"Yig’gilgan ball"}}),t._v(" "),n("el-table-column",{attrs:{prop:"is_blocked",label:"O’quvchi bloklangan"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tag",{attrs:{type:"info",effect:"plain"}},[t._v("\n            "+t._s(t.boolTitle[e.row.is_blocked])+"\n          ")])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"worked",label:"Test to’liq ishlangan"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tag",{attrs:{type:e.row.worked?"primary":"info",effect:e.row.worked?"":"plain"}},[t._v("\n            "+t._s(t.boolTitle[e.row.worked])+"\n          ")])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"status",label:"Testdan o’tganligi"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tag",{attrs:{type:e.row.status?"primary":"info",effect:e.row.status?"":"plain"}},[t._v("\n            "+t._s(t.boolTitle[e.row.status])+"\n          ")])]}}])})],1),t._v(" "),t.test_results[0]?[["student"].includes(t.role)&&!t.test_results[0].worked&&t.test_results[0].status?n("button",{staticClass:"add-btn px-2 mt-5",on:{click:function(e){t.dialog_test=!0}}},[t._v("\n        Qayta ishlash\n      ")]):t._e()]:t._e()],2),t._v(" "),n("el-dialog",{attrs:{"close-on-click-modal":!1,visible:t.dialog_monitoring,title:"Test monitoringi",width:"min(90%, 1300px)"},on:{"update:visible":function(e){t.dialog_monitoring=e}}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading4,expression:"loading4"}],staticClass:"w-full",attrs:{data:t.test_monitoring_data}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{prop:"student",label:"O’quvchi"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t._f("fio")(e.row))+"\n        ")]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"ball",label:"Yig’gilgan ball"}}),t._v(" "),n("el-table-column",{attrs:{prop:"test_is_running",label:"Test ishlagan"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tag",{attrs:{type:e.row.test_is_running?"primary":"info",effect:e.row.test_is_running?"":"plain"}},[t._v("\n            "+t._s(t.boolTitle[e.row.test_is_running])+"\n          ")])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"worked",label:"Test to’liq ishlangan"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tag",{attrs:{type:e.row.worked?"primary":"info",effect:e.row.worked?"":"plain"}},[t._v("\n            "+t._s(t.boolTitle[e.row.worked])+"\n          ")])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"status",label:"Testdan o’tganligi"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tag",{attrs:{type:e.row.status?"primary":"info",effect:e.row.status?"":"plain"}},[t._v("\n            "+t._s(t.boolTitle[e.row.status])+"\n          ")])]}}])}),t._v(" "),n("el-table-column",{attrs:{width:"160px",prop:"status",label:"Status"},scopedSlots:t._u([{key:"default",fn:function(e){return e.row.is_expired?void 0:[e.row.is_blocked?n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-success"},on:{click:function(n){return t.blockUser(e.row.teacher_test,e.row.id,!1)}}},[t._v("\n            Blokdan chiqarish\n          ")]):n("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-remove"},on:{click:function(n){return t.blockUser(e.row.teacher_test,e.row.id,!0)}}},[t._v("\n            Bloklash\n          ")])]}}],null,!0)})],1)],1),t._v(" "),n("el-dialog",{attrs:{"close-on-click-modal":!1,visible:t.dialog_add,title:"O’quvchilar uchun test yaratish",width:"800px"},on:{"update:visible":function(e){t.dialog_add=e}}},[n("ValidationObserver",{ref:"teachers_test"},[n("el-row",{staticClass:"create-group",attrs:{gutter:20}},[n("el-col",{attrs:{md:12}},[n("div",{staticClass:"item flex-1"},[n("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.errors;return[n("p",[t._v("Guruhni tanlang")]),t._v(" "),n("el-select",{staticClass:"w-full",class:{invalid:l[0]},attrs:{placeholder:"Guruhni tanlang"},on:{change:function(e){return t.getStudent()}},model:{value:t.test_form.group,callback:function(e){t.$set(t.test_form,"group",e)},expression:"test_form.group"}},t._l(t.groups,(function(t){return n("el-option",{key:t.id,attrs:{label:t.name_uz,value:t.id}})})),1)]}}])})],1),t._v(" "),["teacher"].includes(t.role)?n("div",{staticClass:"item"},[n("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.errors;return[n("p",[t._v("\n                Boshlash vaqti\n                "),n("el-tooltip",{staticClass:"blocked",attrs:{effect:"dark",content:"Test faqat tanlangan kuni 00:00 dan 23:59 gacha ochiq bo’ladi",placement:"top-start"}},[n("i",{staticClass:"text-yellow-500 el-icon-info"})])],1),t._v(" "),n("el-date-picker",{class:{invalid:l[0]},attrs:{type:"date",format:"dd.MM.yyyy","value-format":"dd.MM.yyyy","picker-options":t.pickerOptions,placeholder:"Boshlash vaqti"},model:{value:t.test_form.start_time,callback:function(e){t.$set(t.test_form,"start_time",e)},expression:"test_form.start_time"}})]}}],null,!1,4090680975)})],1):t._e()]),t._v(" "),n("el-col",{attrs:{md:12}},[["teacher"].includes(t.role)?n("div",{staticClass:"item flex-1"},[n("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.errors;return[n("p",[t._v("O’quvchilarni tanlang")]),t._v(" "),n("el-select",{staticClass:"w-full",class:{invalid:l[0]},attrs:{disabled:!t.test_form.group,multiple:"",placeholder:"O’quvchilarni tanlang"},model:{value:t.test_form.students,callback:function(e){t.$set(t.test_form,"students",e)},expression:"test_form.students"}},t._l(t.students,(function(e){return n("el-option",{key:e.id,attrs:{label:t._f("fio")(e),value:e.id}})})),1)]}}],null,!1,1450803381)})],1):t._e()])],1)],1),t._v(" "),n("button",{staticClass:"add-btn px-2 mt-5",on:{click:t.createTeachersTest}},[t._v("\n      Yaratish\n    ")])],1)],1)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",{staticClass:"flex justify-between"},[n("h1",[t._v("Yakuniy Testlar")])])}],!1,null,null,null);e.default=component.exports}}]);